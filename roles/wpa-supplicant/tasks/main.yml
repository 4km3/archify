---
- name: Install wpa_supplicant and wpa_supplicant_gui
  pacman:
    name={{ item }}
    state=present
  with_items:
    - wpa_supplicant
    - wpa_supplicant_gui

- name: Install wpa_supplicant-wlan0.conf
  template:
    src={{ item }}.j2
    dest=/etc/wpa_supplicant/{{ item }}
    backup=yes
    owner=root
    group=root
    mode=0600
  with_items:
    - wpa_supplicant-wlan0.conf
  notify:
    - Restart wpa_supplicant@wlan0.service

- name: Enable wpa_supplicant@wlan0.service
  service:
    name=wpa_supplicant@wlan0.service
    enabled=yes
    state=started
